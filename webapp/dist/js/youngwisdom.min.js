function AnimScene(a){_.extend(this,a),this.status=-1,this.triggerElement&&("string"==typeof this.triggerElement&&(this.triggerElement=$(this.triggerElement)),this.offset=this.triggerElement.offset().top-$(window).height(),this.duration||(this.duration=Math.max($(this.triggerElement).prop("scrollHeight"),$(window).height())),this.delayPercent&&(this.offset+=this.delayPercent/100*this.duration,this.duration=(1-this.delayPercent/100)*this.duration)),this.end=this.offset+this.duration}function ScrollableAnim(a){this.panel=a,this.scenes=[];var b=this;a.on("scroll",function(c){setTimeout(function(){var c=a.scrollTop();0>c||b.scenes.forEach(function(a){a.beat(c)})},0)})}angular.module("ywWidgets",["ngAnimate"]),angular.module("ywLanding",["ngRoute","ywText","ywWidgets"]),angular.module("ywLanding").controller("main",["$scope","t",function(a,b){a.t=b,a.hideHeader=!1,a.setHideHeader=function(b){a.hideHeader=!0},a.emailFormat=/[a-zA-Z0-9_.]+@[a-zA-Z0-9_.]+/}]).controller("ywComments",["$scope","t",function(a,b){a.comments=[{text:"没有青智唯嘉的帮助，不像在运营我自己的公司。"},{text:"我从来没有遇到一个团队对记账服务如此热情，青智唯嘉轻松为我们解决了大问题。"}]}]).controller("defaultController",["$scope","t",function(a,b){}]).controller("featureController",["$scope","t","$route","$routeParams","$location",function(a,b,c,d,e){a.jump=function(b){a.anchorIdx=b}}]).controller("signupController",["$scope","$location",function(a,b){a.signup=function(){a.signupPageForm.$valid&&b.path("/signup-steps")}}]).controller("signupStepController",["$scope","$location",function(a,b){a.setHideHeader(!0)}]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/views/home.html",controller:"defaultController"}).when("/feature",{templateUrl:"/views/feature.html",controller:"featureController"}).when("/feature/:anchor",{templateUrl:"/views/feature.html",controller:"featureController"}).when("/signup",{templateUrl:"/views/signup-page.html",controller:"signupController"}).when("/signup-steps",{templateUrl:"/views/signup-steps.html",controller:"signupStepController"})}]),angular.module("ywLanding").directive("ywFeatureSection",["$timeout",function(a){return{template:'<div class="section"><div class="section-icon glyphicon"></div><div class="section-background"></div><h2>{{title}}</h2><div ng-transclude></div></div>',transclude:!0,scope:{title:"@"},link:function(a,b,c){b.addClass("section-wrap"),b.find(".glyphicon").first().addClass(c.iconClass)}}}]),angular.module("ywLanding").directive("ywMain",["$timeout","$interval","$window",function(a,b){return{link:function(b,c,d){b.$on("$viewContentLoaded",function(){a(function(){$(window).scrollTop(0)},0,!1)});var e=c.find(".header");a(function(){var a=new ScrollableAnim($(window));a.scene({offset:15,duration:400,startup:function(a){a?e.removeClass("header-fixed"):e.addClass("header-fixed")}})},50,!1)}}}]).directive("ywHome",["$compile","$timeout","$interval","$window",function(a,b,c,d){return{restrict:"EAC",compile:function(a,e){return function(a,e,f){b(function(){var b=new ScrollableAnim($(d)),f=e.find("#chart-polygon"),g=e.find("#SvgjsPolyline1010"),h=e.find("ellipse"),i=new TimelineLite({paused:!0});i.to(f,.8,{callback:function(a){var b=129-60*a,c=130+30*a,d=65+70*a,e="-150,213 150,209 450,"+c+" 750,"+b+" 1050,"+d+" 1350,43 1650,15";g.attr("points",e),f.attr("points",e+" 1950,250 -150,250"),h[3].setAttribute("cy",b),h[2].setAttribute("cy",c),h[4].setAttribute("cy",d)},ease:Power2.EaseInOut}),i.to(f,.8,{callback:function(a){var b=135-30*a,c=43+50*a,d="-150,213 150,209 450,160 750,69 1050,"+b+" 1350,"+c+" 1650,15";g.attr("points",d),f.attr("points",d+" 1950,250 -150,250"),h[4].setAttribute("cy",b),h[5].setAttribute("cy",c)},ease:Power2.EaseInOut},"+=3"),i.play(),c(function(){i.reversed()?i.restart():i.reverse()},6500,0,!1);var j=new TimelineLite({paused:!0}),k=e.find("#screen-intro .anim-timeline"),l=e.find("#screen-intro .line-dot"),m=e.find("#screen-intro .step"),n=e.find("#screen-intro .glyphicon");j.to(k,2.1,{width:"100%",ease:Linear.easeNone}),j.staggerTo(l,.2,{className:"+=lightened"},.7,0),j.staggerTo(m,.2,{color:"#323232"},.7,0),j.staggerFromTo(n,.7,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Elastic.easeOut},.7,0),b.scene({triggerElement:"#screen-intro .steps",delayPercent:0,startup:function(a){a||j.restart()}});var o=new TimelineLite({paused:!0});o.staggerFromTo($("#screen-signup2 .yw-icon"),1,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Elastic.easeOut,repeat:-1,delay:.5,repeatDelay:5},.3),b.scene({triggerElement:"#screen-signup2",startup:function(a){a||o.restart()}}),b.scene({triggerElement:"#screen-comments",startup:function(b){b||(a.commentAnimStart="true",a.$apply())}})},1e3,!1)}}}}]).directive("ywChartAnim",["$timeout",function(a){return{restrict:"EAC",link:function(b,c,d){a(function(){var a=$(window),b=c.find("svg");a.resize(function(){b.attr("width",a.width())}),b.attr("width",a.width())},50,!1)}}}]).directive("ywCommentAnim",["$timeout",function(a){return{restrict:"EAC",link:function(b,c,d){function e(){if(null!=h){var a=h-2;a=0>a?g.length+a:a,TweenMax.to(g[a],.5,{opacity:0,yPercent:100,onComplete:function(){var a=g.eq(h);a.removeClass("yw-anim-hide"),TweenMax.fromTo(a,.3,{opacity:0,yPercent:-100},{opacity:1,yPercent:0}),h++,h=h===g.length?0:h}})}}function f(){e(),a(e,1e3,!1),a(f,5e3,!1)}c.addClass("yw-comment-anim");var g,h=0;a(function(){g=c.find(".yw-bubble"),g.addClass("yw-anim-hide")},50),d.$observe("ywCommentAnim",function(a){("yes"===a||"true"===a)&&f()})}}}]).directive("ywFeature",["$compile","$timeout","$interval","$window",function(a,b,c,d){return{restrict:"EAC",link:function(a,c,d){a.$watch("anchorIdx",function(a,b){if(null!=a){var d=c.find(".section-wrap").eq(parseInt(a,10)).offset().top;TweenMax.to(window,.5,{scrollTo:{y:d-$(".header").outerHeight()-35},ease:Power2.easeOut})}}),b(function(){var a=new ScrollableAnim($(window)),b=new TimelineLite({paused:!0});b.staggerFromTo($("#screen-signup2 .yw-icon"),1,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Elastic.easeOut,repeat:-1,delay:.5,repeatDelay:5},.3),a.scene({triggerElement:"#screen-signup2",startup:function(a){a||b.restart()}})},50,!1)}}}]),angular.module("ywLanding").directive("ywSignupSteps",["$timeout",function(a){return{compile:function(){return function(b,c,d){var e=c.find("[yw-name-card]"),f=e.eq(0).attr("yw-target");a(function(){console.log($(f).offset())},50,!1)}}}}]),angular.module("ywWidgets").directive("ywLink",["$compile",function(a){return{restrict:"C",compile:function(a,b,c){return function(a,b,c){var d=angular.element('<div class="underscore"></div>');b.append(d)}}}}]).directive("ywBubble",["$compile",function(a){return{restrict:"AE",template:'<div><div class="yw-bubble-box"><div class="arrow"></div><div ng-transclude class="bubble-content"></div></div></div>',transclude:!0,compile:function(a,b,c){return a.addClass("yw-bubble"),function(a,b,c){}}}}]).directive("ywButton",[function(){return{restrict:"AEC",link:function(a,b,c){b.addClass("yw-button"),b.on("mousedown",function(){b.addClass("down")}),$("body").on("mouseup",function(){b.removeClass("down")})}}}]).directive("ywPassword",["$compile",function(a){return{link:function(a,b,c){var d="text"===c.ywPassword,e=$('<i class="glyphicon glyphicon-eye-open"></i>');if(b.after(e),d){var f=$('<span class="pwd-vis-hints">显示</span>');e.after(f)}e.on("click",function(){"password"===b.attr("type")?(b.attr("type","text"),e.removeClass("glyphicon-eye-open"),e.addClass("glyphicon-eye-close"),f.html("隐藏")):(b.attr("type","password"),e.removeClass("glyphicon-eye-close"),e.addClass("glyphicon-eye-open"),f.html("显示"))})}}}]).animation(".yw-animation",function(){return{addClass:function(a,b,c){"ng-hide"===b?TweenMax.fromTo(a,.25,{opacity:1,yPercent:0},{opacity:0,yPercent:-100,onComplete:c,ease:Power2.easeOut}):c()},removeClass:function(a,b,c){"ng-hide"===b?TweenMax.fromTo(a,.25,{opacity:0,yPercent:-100},{opacity:1,yPercent:0,onComplete:c,ease:Power2.easeOut}):c()},leave:function(a,b){b(),TweenMax.to(a,.3,{opacity:0,onComplete:function(){}})},enter:function(a,b){TweenMax.fromTo(a,.7,{opacity:0},{opacity:1,onComplete:function(){b()}})}}});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine.plugin({propName:"callback",priority:0,API:2,version:"1.0.0",overwriteProps:[],init:function(a,b,c){return this._callback=b,!0},set:function(a){this._super.setRatio.call(this,a),this._callback(a)}})}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),AnimScene.prototype={_startup:function(a){this.startup&&this.startup(a)},_teardown:function(a){this.teardown&&this.teardown(a)},beat:function(a){if(a>=this.offset&&a<this.end){var b=a-this.offset,c=b/this.duration;-1===this.status?this._startup(!1):1===this.status&&this._teardown(!0),this.timeline&&this.timeline.seek(c),this.onScroll&&this.onScroll(b,c),this.status=0}else-1!==this.status&&a<this.offset?(0===this.status?this._startup(!0):1===this.status&&(this._teardown(!0),this._startup(!0)),this.status=-1,this.timeline&&this.timeline.seek(0),this.onScroll&&this.onScroll(0,0)):1!==this.status&&a>=this.end&&(0===this.status?this._teardown(!1):-1===this.status&&(this._startup(!1),this._teardown(!1)),this.status=1,this.timeline&&this.timeline.seek(1),this.onScroll&&this.onScroll(this.duration,1))}},ScrollableAnim.prototype={addScene:function(a){this.scenes.push(a),a.scrollPanel=this.panel},scene:function(a){var b=new AnimScene(a);return this.addScene(b),b},pin:function(a){"string"==typeof a&&(a=$(a)),a=a.first();var b=a.next(".scl-anim-pl");b&&0!==b.length||(b=$('<div class="scl-anim-pl"></div>'),b.css({display:"none",margin:"0",padding:"0"}),a.after(b));var c=0,d=0,e=this.panel.offset();e&&(c=e.top,d=e.left),console.log("pin at "+(a.offset().top-c-this.panel.scrollTop()));var f=a.css("display"),g=a.outerWidth(!0),h=a.outerHeight(!0),i=a.css("width"),j=a.css("height"),k=a.offset().top,l=a.offset().left;b.addClass(a.prop("className")),b.css({display:f,width:g,height:h}),a.css({top:k-c-this.panel.scrollTop()+"px",left:l-d-this.panel.scrollLeft()+"px",position:"fixed",width:i,height:j})},unpin:function(a){"string"==typeof a&&(a=$(a)),a.first().css({top:"",left:"",position:"",width:"",height:""}),a.first().next(".scl-anim-pl").css({display:"none"})}};
//# sourceMappingURL=youngwisdom.min.js.map