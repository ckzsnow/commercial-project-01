function AnimScene(a){_.extend(this,a),this.status=-1,this.triggerElement&&("string"==typeof this.triggerElement&&(this.triggerElement=$(this.triggerElement)),this.offset=this.triggerElement.offset().top-$(window).height(),this.duration||(this.duration=Math.max($(this.triggerElement).prop("scrollHeight"),$(window).height())),this.delayPercent&&(this.offset+=this.delayPercent/100*this.duration,this.duration=(1-this.delayPercent/100)*this.duration)),this.end=this.offset+this.duration}function ScrollableAnim(a){this.panel=a,this.scenes=[];var b=this;a.on("scroll",function(c){setTimeout(function(){var c=a.scrollTop();0>c||b.scenes.forEach(function(a){a.beat(c)})},0)})}angular.module("ywWidgets",["ngAnimate"]),angular.module("ywLanding",["ngRoute","ywText","ywWidgets"]),angular.module("ywLanding").controller("main",["$scope","t",function(a,b){a.t=b,a.hideHeader=!1,a.hideContactScreen=!1,a.setHideHeader=function(b){a.hideHeader=b},a.setHideContactScreen=function(b){a.hideContactScreen=b},a.emailFormat=/[a-zA-Z0-9_.]+@[a-zA-Z0-9_.]+/}]).controller("ywComments",["$scope","t",function(a,b){a.comments=[{text:"没有青智唯嘉的帮助，不像在运营我自己的公司。"},{text:"我从来没有遇到一个团队对记账服务如此热情，青智唯嘉轻松为我们解决了大问题。"}]}]).controller("homeController",["$scope","t","$location","$q",function(a,b,c,d){a.signupScreenReady=d.defer(),a.introScreenReady=d.defer(),a.whatScreenReady=d.defer(),a.commentsScreenReady=d.defer(),a.signup2ScreenReady=d.defer(),a.setHideHeader(!1),a.setHideContactScreen(!1),a.scroll2Top(),a.signup=function(){c.path("/signup-steps")}}]).controller("featureController",["$scope","t","$route","$routeParams","$q","$location",function(a,b,c,d,e,f){a.signup2ScreenReady=e.defer(),a.setHideHeader(!1),a.setHideContactScreen(!1),a.scroll2Top(),a.jump=function(b){a.anchorIdx=b}}]).controller("signupController",["$scope","$location",function(a,b){a.setHideHeader(!0),a.setHideContactScreen(!0),a.scroll2Top(),a.signup=function(){a.signupPageForm.$valid&&b.path("/signup-steps")}}]).controller("signinController",["$scope","$location",function(a,b){a.setHideHeader(!0),a.setHideContactScreen(!0),a.scroll2Top(),a.signup=function(){a.signupPageForm.$valid&&b.path("/signup-steps")}}]).controller("signupStepController",["$scope","$location","$route","$routeParams",function(a,b,c,d){if(a.setHideHeader(!0),a.setHideContactScreen(!0),a.model1={name:"Ivy",title:"会计事务资深顾问"},a.model2={name:"Evan",title:"会计师"},a.model1.desc=a.model1.name,a.stepsUI={showBasicForm:!1},d.signupStep&&1!==d.signupStep){a.currStep=parseInt(d.signupStep,10)}else a.currStep=1;a.theModel=a.model1,a.tipModel=function(b){a.theModel=b},a.validate=function(){return a.signupStep3Form.$valid}}]).controller("teamController",["$scope",function(a){a.setHideHeader(!1),a.setHideContactScreen(!1),a.teams=[{title:"我们的财税团队",members:[{image:"team_jzz.jpg",intro:"蒋中植"},{image:"team_csy.jpg",intro:"陈抒元"},{image:"team_yjl.jpg",intro:"姚嘉伦"}]},{title:"我们的IT团队",members:[{image:"team_ckz.jpg",intro:"柴快长"},{image:"team_dxj.jpg",intro:"段行健"}]}]}]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/views/home.html",controller:"homeController"}).when("/feature",{templateUrl:"/views/feature.html",controller:"featureController"}).when("/feature/:anchor",{templateUrl:"/views/feature.html",controller:"featureController"}).when("/signup",{templateUrl:"/views/signup-page.html",controller:"signupController"}).when("/signup-steps",{templateUrl:"/views/signup-steps.html",controller:"signupStepController"}).when("/signup-steps/:signupStep",{templateUrl:"/views/signup-steps.html",controller:"signupStepController"}).when("/signin",{templateUrl:"/views/signin-page.html",controller:"signupController"}).when("/team",{templateUrl:"/views/team-page.html",controller:"teamController"})}]),angular.module("ywLanding").directive("ywFeatureSection",["$timeout",function(a){return{template:'<div class="section"><div class="section-icon glyphicon"></div><div class="section-background"></div><h2>{{title}}</h2><div ng-transclude></div></div>',transclude:!0,scope:{title:"@"},link:function(a,b,c){b.addClass("section-wrap"),b.find(".glyphicon").first().addClass(c.iconClass)}}}]),angular.module("ywLanding").directive("ywMain",["$timeout","$interval","$window",function(a,b){return{link:function(b,c,d){b.scroll2Top=function(){a(function(){$(window).scrollTop(0)},50,!1)};var e=c.find(".header");a(function(){var a=new ScrollableAnim($(window));a.scene({offset:15,duration:400,startup:function(a){a?e.removeClass("header-fixed"):e.addClass("header-fixed")}})},50,!1)}}}]).directive("ywHome",["$compile","$timeout","$interval","$window","$q",function(a,b,c,d,e){return{restrict:"EAC",compile:function(a,b){return function(a,b,f){e.all([a.signupScreenReady.promise,a.introScreenReady.promise,a.whatScreenReady.promise,a.commentsScreenReady.promise,a.signup2ScreenReady.promise]).then(function(){var e=new ScrollableAnim($(d)),f=b.find("#chart-polygon"),g=b.find("#SvgjsPolyline1010"),h=b.find("ellipse"),i=new TimelineLite({paused:!0});i.to(f,.8,{callback:function(a){var b=129-60*a,c=130+30*a,d=65+70*a,e="-150,213 150,209 450,"+c+" 750,"+b+" 1050,"+d+" 1350,43 1650,15";g.attr("points",e),f.attr("points",e+" 1950,250 -150,250"),h[3].setAttribute("cy",b),h[2].setAttribute("cy",c),h[4].setAttribute("cy",d)},ease:Power2.EaseInOut}),i.to(f,.8,{callback:function(a){var b=135-30*a,c=43+50*a,d="-150,213 150,209 450,160 750,69 1050,"+b+" 1350,"+c+" 1650,15";g.attr("points",d),f.attr("points",d+" 1950,250 -150,250"),h[4].setAttribute("cy",b),h[5].setAttribute("cy",c)},ease:Power2.EaseInOut},"+=3"),i.play(),c(function(){i.reversed()?i.restart():i.reverse()},6500,0,!1);var j=new TimelineLite({paused:!0}),k=b.find("#screen-intro .anim-timeline"),l=b.find("#screen-intro .line-dot"),m=b.find("#screen-intro .step"),n=b.find("#screen-intro .glyphicon");j.to(k,2.1,{width:"100%",ease:Linear.easeNone}),j.staggerTo(l,.2,{className:"+=lightened"},.7,0),j.staggerTo(m,.2,{color:"#323232"},.7,0),j.staggerFromTo(n,.7,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Elastic.easeOut},.7,0),e.scene({triggerElement:"#screen-intro .steps",delayPercent:0,startup:function(a){a||j.restart()}});var o=new TimelineLite({paused:!0});o.staggerFromTo($("#screen-signup2 .yw-icon"),1,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Elastic.easeOut,repeat:-1,delay:.5,repeatDelay:5},.3),e.scene({triggerElement:"#screen-signup2",startup:function(a){a||o.restart()}}),e.scene({triggerElement:"#screen-comments",startup:function(b){b||(a.commentAnimStart="true",a.$apply())}})})}}}}]).directive("ywChartAnim",["$timeout",function(a){return{restrict:"EAC",link:function(b,c,d){a(function(){var a=$(window),b=c.find("svg");a.resize(function(){b.attr("width",a.width())}),b.attr("width",a.width())},50,!1)}}}]).directive("ywCommentAnim",["$timeout",function(a){return{restrict:"EAC",link:function(b,c,d){function e(){if(null!=h){var a=h-2;a=0>a?g.length+a:a,TweenMax.to(g[a],.5,{opacity:0,yPercent:100,onComplete:function(){var a=g.eq(h);a.removeClass("yw-anim-hide"),TweenMax.fromTo(a,.3,{opacity:0,yPercent:-100},{opacity:1,yPercent:0}),h++,h=h===g.length?0:h}})}}function f(){e(),a(e,1e3,!1),a(f,5e3,!1)}c.addClass("yw-comment-anim");var g,h=0;a(function(){g=c.find(".yw-bubble"),g.addClass("yw-anim-hide")},50),d.$observe("ywCommentAnim",function(a){("yes"===a||"true"===a)&&f()})}}}]).directive("ywFeature",["$compile","$timeout","$interval","$window","$q",function(a,b,c,d,e){return{restrict:"EAC",link:function(a,b,c){a.$watch("anchorIdx",function(a,c){if(null!=a){var d=b.find(".section-wrap").eq(parseInt(a,10)).offset().top;TweenMax.to(window,.5,{scrollTo:{y:d-$(".header").outerHeight()-35},ease:Power2.easeOut})}}),e.all([a.signup2ScreenReady.promise]).then(function(){var a=new ScrollableAnim($(window)),b=new TimelineLite({paused:!0});b.staggerFromTo($("#screen-signup2 .yw-icon"),1,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Elastic.easeOut,repeat:-1,delay:.5,repeatDelay:5},.3),a.scene({triggerElement:"#screen-signup2",startup:function(a){a||b.restart()}})})}}}]),angular.module("ywLanding").directive("ywSignupSteps",["$timeout","$q",function(a,b){return{scope:!1,controller:["$scope",function(a){this.setAnimNameCard=function(b){a.animNameCard=b}}],compile:function(){return function(c,d,e){var f=d.find("[yw-name-card]");f.each(function(){var b=$(this);b.addClass("yw-name-card"),a(function(){var a=b.eq(0).attr("yw-target"),c=$(a),d=c.offset(),e=d.top+c.height(),f=b.offsetParent();b.css({top:e+"px",left:d.left-f.offset().left})},50,!1)}),c.$watch("currStep",function(e){2===e&&a(function(){var a,e=d.find(".signup-meet");e.height(e.height());var f=c.animNameCard;a={x:e.offset().left,y:e.offset().top};var g=b.defer(),h=new TimelineLite({delay:.3,onComplete:function(){c.model1.desc=c.model1.name+"    "+c.model1.title,c.stepsUI.showBasicForm=!0,c.$apply(),g.resolve()}});h.to(f,.7,{top:e.outerHeight()-f.height()+66,left:"-140px",width:e.width()/3,"border-radius":0}),h.to(d.find(".signup-p-intro")[0],.7,{display:"none"},0);var i=d.find(".col-evan");TweenLite.set(i,{transformOrigin:"center 30%"}),h.to(i,.7,{height:0},0),h.to(d.find(".col-desc"),.7,{height:0,padding:0},0);var j=d.find("[yw-name-card]").eq(1);h.to(j,.7,{opacity:0,onComplete:function(){j.remove()}},0);var k=d.find(".portrait").eq(0);k.css({position:"absolute"}),h.to(k,.7,{height:e.height()},0),g.promise.then(function(){console.log(d.find(".underscore")),TweenMax.staggerTo(d.find(".underscore"),.4,{width:"90%"},.15)})},50,!1)})}}}}]).directive("ywNameCard",["$timeout",function(a){var b;return{require:"^ywSignupSteps",link:function(c,d,e,f){var g,h=d.find("img");"LJ is awesome"===e.animInStep2&&f.setAnimNameCard(d),1===c.currStep&&(d.on("mouseenter.ywNameCard",function(f){b&&(a.cancel(b),b=null);d.offset();g||(g=$(".yw-namecard-tip")),c.tipModel(c[e.ywNameCard]),c.$apply(),a(function(){var a=g.offsetParent().offset();g.css({top:h.offset().top-a.top,left:h.offset().left-a.left,visibility:"visible"})},0,!1)}),d.on("mouseleave.ywNameCard",function(c){b=a(function(){g.css({visibility:"hidden"}),b=null},400,!1)}),a(function(){g||(g=$(".yw-namecard-tip")),g.on("mouseenter",function(){null!=b&&a.cancel(b)&&(g.on("mouseleave",function(){g.css({visibility:"hidden"}),g.off("mouseleave")}),b=null)})},50,!1))}}}]),angular.module("ywLanding").directive("ywTeamPage",["$timeout","$q",function(a,b){return{link:function(b,c,d){a(function(){var a=c.find(".member>img");TweenMax.set(a,{scaleX:0,scaleY:0}),TweenMax.staggerFromTo(a,1,{scaleX:0,scaleY:0},{scaleX:1,scaleY:1,ease:Elastic.easeOut,delay:.45},.2)},100,!1)}}}]),angular.module("ywWidgets").directive("ywLink",["$compile",function(a){return{restrict:"C",compile:function(a,b,c){return function(a,b,c){var d=angular.element('<div class="underscore"></div>');b.append(d)}}}}]).directive("ywBubble",["$compile",function(a){return{restrict:"AE",template:'<div><div class="yw-bubble-box"><div class="arrow"></div><div ng-transclude class="bubble-content"></div></div></div>',transclude:!0,compile:function(a,b,c){return a.addClass("yw-bubble"),function(a,b,c){}}}}]).directive("ywButton",[function(){return{restrict:"AEC",link:function(a,b,c){b.addClass("yw-button"),b.on("mousedown",function(){b.addClass("down")}),$("body").on("mouseup",function(){b.removeClass("down")})}}}]).directive("ywPassword",["$compile",function(a){return{link:function(a,b,c){var d="text"===c.ywPassword,e=$('<i class="glyphicon glyphicon-eye-open"></i>');if(b.after(e),d){var f=$('<span class="pwd-vis-hints">显示</span>');e.after(f)}e.on("click",function(){"password"===b.attr("type")?(b.attr("type","text"),e.removeClass("glyphicon-eye-open"),e.addClass("glyphicon-eye-close"),f&&f.html("隐藏")):(b.attr("type","password"),e.removeClass("glyphicon-eye-close"),e.addClass("glyphicon-eye-open"),f&&f.html("显示"))})}}}]).animation(".yw-animation",function(){return{addClass:function(a,b,c){"ng-hide"===b?TweenMax.fromTo(a,.25,{opacity:1,yPercent:0},{opacity:0,yPercent:-100,onComplete:c,ease:Power2.easeOut}):c()},removeClass:function(a,b,c){"ng-hide"===b?TweenMax.fromTo(a,.25,{opacity:0,yPercent:-100},{opacity:1,yPercent:0,onComplete:c,ease:Power2.easeOut}):c()},leave:function(a,b){b(),TweenMax.to(a,.3,{opacity:0,onComplete:function(){}})},enter:function(a,b){TweenMax.fromTo(a,.7,{opacity:0},{opacity:1,onComplete:function(){b()}})}}});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine.plugin({propName:"callback",priority:0,API:2,version:"1.0.0",overwriteProps:[],init:function(a,b,c){return this._callback=b,!0},set:function(a){this._super.setRatio.call(this,a),this._callback(a)}})}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),AnimScene.prototype={_startup:function(a){this.startup&&this.startup(a)},_teardown:function(a){this.teardown&&this.teardown(a)},beat:function(a){if(a>=this.offset&&a<this.end){var b=a-this.offset,c=b/this.duration;-1===this.status?this._startup(!1):1===this.status&&this._teardown(!0),this.timeline&&this.timeline.seek(c),this.onScroll&&this.onScroll(b,c),this.status=0}else-1!==this.status&&a<this.offset?(0===this.status?this._startup(!0):1===this.status&&(this._teardown(!0),this._startup(!0)),this.status=-1,this.timeline&&this.timeline.seek(0),this.onScroll&&this.onScroll(0,0)):1!==this.status&&a>=this.end&&(0===this.status?this._teardown(!1):-1===this.status&&(this._startup(!1),this._teardown(!1)),this.status=1,this.timeline&&this.timeline.seek(1),this.onScroll&&this.onScroll(this.duration,1))}},ScrollableAnim.prototype={addScene:function(a){this.scenes.push(a),a.scrollPanel=this.panel},scene:function(a){var b=new AnimScene(a);return this.addScene(b),b},pin:function(a){"string"==typeof a&&(a=$(a)),a=a.first();var b=a.next(".scl-anim-pl");b&&0!==b.length||(b=$('<div class="scl-anim-pl"></div>'),b.css({display:"none",margin:"0",padding:"0"}),a.after(b));var c=0,d=0,e=this.panel.offset();e&&(c=e.top,d=e.left),console.log("pin at "+(a.offset().top-c-this.panel.scrollTop()));var f=a.css("display"),g=a.outerWidth(!0),h=a.outerHeight(!0),i=a.css("width"),j=a.css("height"),k=a.offset().top,l=a.offset().left;b.addClass(a.prop("className")),b.css({display:f,width:g,height:h}),a.css({top:k-c-this.panel.scrollTop()+"px",left:l-d-this.panel.scrollLeft()+"px",position:"fixed",width:i,height:j})},unpin:function(a){"string"==typeof a&&(a=$(a)),a.first().css({top:"",left:"",position:"",width:"",height:""}),a.first().next(".scl-anim-pl").css({display:"none"})}};
//# sourceMappingURL=youngwisdom.min.js.map